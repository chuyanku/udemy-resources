<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>テスト入力サンプルページ</title>
  <style>
    /* --- Base Variables (Light Theme) --- */
    :root {
      --bg-color: #f8f9fa;
      --form-bg-color: #ffffff;
      --text-color: #212529;
      --muted-text-color: #6c757d;
      --placeholder-color: #adb5bd;
      --border-color: #dee2e6;
      --input-border-color: #ced4da;
      --input-bg-color: #ffffff;
      --input-focus-border-color: #80bdff;
      --input-focus-shadow-color: rgba(0, 123, 255, 0.25);
      --primary-color: #007bff;
      --primary-hover-color: #0056b3;
      --primary-gradient-start: #007bff;
      --primary-gradient-end: #0056b3;
      --primary-gradient-hover-start: #0069d9;
      --primary-gradient-hover-end: #004085;
      --primary-shadow-color: rgba(0, 123, 255, 0.3);
      --secondary-bg-color: #e9ecef;
      --secondary-border-color: #ced4da;
      --secondary-hover-bg-color: #dee2e6;
      --secondary-hover-border-color: #adb5bd;
      --sample-button-text: #007bff;
      --sample-button-bg: #e7f3ff;
      --sample-button-border: #b8daff;
      --sample-button-hover-bg: #d0e7ff;
      --sample-button-hover-border: #a2cffe;
      --checkmark-bg: #eee;
      --checkmark-border: #ccc;
      --checkmark-hover-bg: #ddd;
      --checkmark-checked-bg: var(--primary-color);
      --checkmark-checked-border: var(--primary-color);
      --checkmark-checked-hover-bg: var(--primary-hover-color);
      --checkmark-checked-hover-border: var(--primary-hover-color);
      --success-color: #28a745;
      --error-color: #dc3545;
      --toast-text-color: #ffffff;
      --toast-progress-bg: rgba(255, 255, 255, 0.4);
      --form-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
      --button-shadow: 0 4px 15px var(--primary-shadow-color);
      --toast-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      --theme-toggle-button-color: #6c757d;
      --theme-toggle-button-hover-bg: rgba(0, 0, 0, 0.05);
      /* 以下は商品リストに関するスタイルでしたが、個人情報フォームでは使用しません。
         デザインの統一性を保つため、元のファイルを参考に残していますが、
         このHTMLでは使用されていないため、実質無効です。
      --table-header-bg: #f8f9fa;
      --table-border-color: var(--border-color);
      --table-stripe-bg: #f8f9fa;
      --table-hover-bg: #f1f3f5;
      --reset-list-button-text: var(--error-color);
      --reset-list-button-bg: transparent;
      --reset-list-button-border: var(--error-color);
      --reset-list-button-hover-bg: rgba(220, 53, 69, 0.1);
      */
    }

    /* --- Dark Theme Variables --- */
    body.dark-theme {
      --bg-color: #1a1a1a;
      --form-bg-color: #2c2c2c;
      --text-color: #e9ecef;
      --muted-text-color: #adb5bd;
      --placeholder-color: #6c757d;
      --border-color: #495057;
      --input-border-color: #495057;
      --input-bg-color: #343a40;
      --input-focus-border-color: #5a9dff;
      --input-focus-shadow-color: rgba(0, 100, 255, 0.35);
      --primary-color: #0d6efd;
      --primary-hover-color: #0b5ed7;
      --primary-gradient-start: #0d6efd;
      --primary-gradient-end: #0b5ed7;
      --primary-gradient-hover-start: #3b82f6;
      --primary-gradient-hover-end: #0d6efd;
      --primary-shadow-color: rgba(13, 110, 253, 0.3);
      --secondary-bg-color: #343a40;
      --secondary-border-color: #495057;
      --secondary-hover-bg-color: #495057;
      --secondary-hover-border-color: #6c757d;
      --sample-button-text: #5a9dff;
      --sample-button-bg: #1c3a5e;
      --sample-button-border: #2a588a;
      --sample-button-hover-bg: #2a588a;
      --sample-button-hover-border: #3b82f6;
      --checkmark-bg: #495057;
      --checkmark-border: #6c757d;
      --checkmark-hover-bg: #5a6268;
      --checkmark-checked-bg: var(--primary-color);
      --checkmark-checked-border: var(--primary-color);
      --checkmark-checked-hover-bg: var(--primary-hover-color);
      --checkmark-checked-hover-border: var(--primary-hover-color);
      --success-color: #198754;
      --error-color: #dc3545;
      --toast-text-color: #ffffff;
      --toast-progress-bg: rgba(255, 255, 255, 0.3);
      --form-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
      --button-shadow: 0 4px 15px var(--primary-shadow-color);
      --toast-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
      --theme-toggle-button-color: #adb5bd;
      --theme-toggle-button-hover-bg: rgba(255, 255, 255, 0.1);
      /* 以下は商品リストに関するスタイルでしたが、個人情報フォームでは使用しません。
         デザインの統一性を保つため、元のファイルを参考に残していますが、
         このHTMLでは使用されていないため、実質無効です。
      --table-header-bg: #343a40;
      --table-border-color: var(--border-color);
      --table-stripe-bg: #343a40;
      --table-hover-bg: #3e444a;
      --reset-list-button-text: #ff7b89;
      --reset-list-button-bg: transparent;
      --reset-list-button-border: #ff7b89;
      --reset-list-button-hover-bg: rgba(255, 123, 137, 0.15);
      */
    }

    /* --- Base Styles --- */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.6;
      padding: 20px;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    /* Form Container */
    .form-container {
      position: relative;
      background-color: var(--form-bg-color);
      border-radius: 12px;
      box-shadow: var(--form-shadow);
      max-width: 700px;
      margin: 2rem auto;
      padding: 30px 40px 40px;
      overflow: hidden;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

     /* Theme Toggle Button */
    #theme-toggle-button {
        position: absolute;
        top: 20px;
        left: 25px;
        background: none;
        border: none;
        padding: 8px;
        cursor: pointer;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--theme-toggle-button-color);
        transition: background-color 0.2s ease, color 0.2s ease;
        z-index: 11;
    }
    #theme-toggle-button:hover {
        background-color: var(--theme-toggle-button-hover-bg);
    }
    #theme-toggle-button svg {
        width: 20px;
        height: 20px;
        fill: currentColor;
    }
    .icon-sun, .icon-moon { display: none; }
    body:not(.dark-theme) .icon-moon { display: block; }
    body.dark-theme .icon-sun { display: block; }

    /* Top Right Buttons (Sample/Reset) */
    .form-top-buttons {
        position: absolute;
        top: 20px;
        right: 25px;
        display: flex;
        gap: 10px;
        z-index: 10;
    }
    .form-top-buttons button {
        padding: 6px 12px;
        font-size: 0.85rem;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.2s ease;
        border: 1px solid transparent;
    }
    #fill-sample-button {
        color: var(--sample-button-text);
        background-color: var(--sample-button-bg);
        border-color: var(--sample-button-border);
    }
    #fill-sample-button:hover {
        background-color: var(--sample-button-hover-bg);
        border-color: var(--sample-button-hover-border);
    }
    #reset-form-button {
        color: var(--muted-text-color);
        background-color: var(--secondary-bg-color);
        border-color: var(--secondary-border-color);
    }
    #reset-form-button:hover {
        background-color: var(--secondary-hover-bg-color);
        border-color: var(--secondary-hover-border-color);
    }

    /* Form Title */
    .form-title {
        text-align: center;
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 15px;
        color: var(--text-color);
        margin-top: 30px; /* Space for buttons */
    }
    /* Sample Notice */
    .sample-notice {
        text-align: center;
        margin-bottom: 30px;
        padding: 10px;
        background-color: var(--secondary-bg-color);
        border-radius: 6px;
        font-size: 0.9rem;
        color: var(--muted-text-color);
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    /* Form Group */
    .form-group { margin-bottom: 25px; }
    /* Labels */
    .form-group > label, .label-heading {
        display: block;
        font-weight: 600;
        font-size: 1rem;
        margin-bottom: 8px;
        color: var(--text-color);
        transition: color 0.3s ease;
    }
    /* Required Asterisk */
    .required-asterisk {
        color: var(--error-color);
        font-weight: bold;
        margin-left: 4px;
    }
    /* Form Controls */
    .form-control {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid var(--input-border-color);
        border-radius: 6px;
        font-size: 1rem;
        background-color: var(--input-bg-color);
        color: var(--text-color);
        transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out, background-color 0.3s ease, color 0.3s ease;
    }
    .form-control:focus {
        border-color: var(--input-focus-border-color);
        outline: 0;
        box-shadow: 0 0 0 0.2rem var(--input-focus-shadow-color);
    }
    .form-control::placeholder {
        color: var(--placeholder-color);
        opacity: 1;
    }
    textarea.form-control {
        resize: vertical;
        min-height: 100px;
    }
    /* select要素は今回使用しませんが、デザイン統一のため元のCSSを残します */
    select.form-control {
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        background-size: 16px 12px;
        padding-right: 2.5rem;
    }
    body.dark-theme select.form-control {
       background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23adb5bd' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
    }

    /* Custom Radio & Checkbox (今回使用しませんが、デザイン統一のため元のCSSを残します) */
    .choice-group { display: flex; flex-wrap: wrap; gap: 10px 20px; margin-top: 8px; }
    .choice-group label { display: flex; align-items: center; cursor: pointer; font-weight: 400; color: var(--text-color); position: relative; padding-left: 28px; user-select: none; transition: color 0.3s ease; }
    .choice-group input[type="radio"], .choice-group input[type="checkbox"] { position: absolute; opacity: 0; cursor: pointer; height: 0; width: 0; }
    .checkmark { position: absolute; left: 0; top: 50%; transform: translateY(-50%); height: 20px; width: 20px; background-color: var(--checkmark-bg); border: 1px solid var(--checkmark-border); transition: all 0.2s ease; }
    .choice-group input[type="radio"] ~ .checkmark { border-radius: 50%; }
    .choice-group input[type="checkbox"] ~ .checkmark { border-radius: 4px; }
    .choice-group label:hover input:not(:checked) ~ .checkmark { background-color: var(--checkmark-hover-bg); }
    .choice-group input:checked ~ .checkmark { background-color: var(--checkmark-checked-bg); border-color: var(--checkmark-checked-border); }
    .choice-group label:hover input:checked ~ .checkmark { background-color: var(--checkmark-checked-hover-bg); border-color: var(--checkmark-checked-hover-border); }
    .checkmark:after { content: ""; position: absolute; display: none; }
    .choice-group input:checked ~ .checkmark:after { display: block; }
    .choice-group input[type="radio"]:checked ~ .checkmark:after { top: 50%; left: 50%; width: 8px; height: 8px; border-radius: 50%; background: var(--input-bg-color); transform: translate(-50%, -50%); transition: background-color 0.3s ease; }
    .choice-group input[type="checkbox"]:checked ~ .checkmark:after { left: 6px; top: 2px; width: 5px; height: 10px; border: solid var(--input-bg-color); border-width: 0 3px 3px 0; transform: rotate(45deg); transition: border-color 0.3s ease; }

    /* Submit Button */
    .submit-button {
        display: block; width: 100%; padding: 12px 20px;
        background: linear-gradient(45deg, var(--primary-gradient-start), var(--primary-gradient-end));
        color: var(--toast-text-color); border: none; border-radius: 6px; font-size: 1.1rem; font-weight: 600;
        cursor: pointer; transition: background 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease;
        margin-top: 10px; box-shadow: var(--button-shadow);
    }
    .submit-button:hover {
        background: linear-gradient(45deg, var(--primary-gradient-hover-start), var(--primary-gradient-hover-end));
        box-shadow: 0 6px 20px var(--primary-shadow-color);
    }
    .submit-button:active { transform: translateY(1px); box-shadow: 0 2px 10px var(--primary-shadow-color); }

    /* Toast Message */
    #toast {
        display: none; flex-direction: column; align-items: flex-start;
        background-color: var(--success-color); color: var(--toast-text-color);
        border-radius: 8px; padding: 12px 20px 8px; margin-top: 20px; opacity: 0;
        transition: opacity 0.5s ease, transform 0.3s ease, background-color 0.3s ease;
        transform: translateY(-10px); width: 100%; font-size: 1rem;
        box-shadow: var(--toast-shadow); position: relative; overflow: hidden;
    }
    .toast-main { display: flex; align-items: center; gap: 12px; width: 100%; margin-bottom: 5px; }
    .toast-sub-message { font-size: 0.8em; color: rgba(255, 255, 255, 0.8); margin-left: 36px; }
    #countdown-timer { font-weight: bold; }
    #toast.show { display: flex; opacity: 1; transform: translateY(0); }
    #toast.error { background-color: var(--error-color); }
    #toast.error .toast-icon svg, #toast.error .toast-sub-message, #toast.error .toast-progress-bar { display: none; }
    .toast-progress-bar {
        position: absolute; bottom: 0; left: 0; height: 4px;
        background-color: var(--toast-progress-bg); width: 100%;
        transform: scaleX(1); transform-origin: left; transition: none;
    }
    #toast.shrinking .toast-progress-bar { transform: scaleX(0); transition: transform 5s linear; }
    .toast-icon { width: 24px; height: 24px; flex-shrink: 0; }
    .toast-icon svg { width: 100%; height: 100%; display: block; }
    .toast-icon .check-circle { stroke-dasharray: 166; stroke-dashoffset: 166; stroke-width: 6; stroke-linecap: round; stroke: var(--toast-text-color); fill: none; animation: draw-circle 0.6s cubic-bezier(0.65, 0, 0.45, 1) forwards; }
    .toast-icon .check-mark { stroke-dasharray: 48; stroke-dashoffset: 48; stroke-width: 6; stroke-linecap: round; stroke: var(--toast-text-color); fill: none; animation: draw-check 0.4s cubic-bezier(0.65, 0, 0.45, 1) 0.5s forwards; }
    @keyframes draw-circle { to { stroke-dashoffset: 0; } }
    @keyframes draw-check { to { stroke-dashoffset: 0; } }
    #toast:not(.show) .check-circle, #toast:not(.show) .check-mark { stroke-dashoffset: 166; animation: none; }
    #toast:not(.show) .check-mark { stroke-dashoffset: 48; }

    /* 電話番号入力フィールドのスタイル */
    .tel-input-group {
        display: flex;
        align-items: center;
        gap: 8px; /* input間のスペース */
    }
    .tel-input-group input {
        flex-grow: 1; /* 各inputが均等に幅を占めるように */
        min-width: 0; /* flexアイテムの最小幅を設定 */
    }
    .tel-input-group span {
        color: var(--text-color);
        font-size: 1.2rem;
        font-weight: 600;
    }
    /* 特定のinputの幅を調整（必要であれば） */
    .tel-input-group input:first-child { width: 80px; } /* 例: 090 */
    .tel-input-group input:nth-child(3),
    .tel-input-group input:nth-child(5) { width: 100px; } /* 例: 1234, 5678 */
    /* 小さなテキストの説明 */
    .form-group small {
        color: var(--muted-text-color);
        margin-top: 5px;
        display: block;
        font-size: 0.85em;
    }

    /* --- Responsive Design Adjustments --- */
    @media (max-width: 768px) {
      .form-container { padding: 30px 25px 30px; margin: 1rem auto; }
      #theme-toggle-button { top: 15px; left: 15px; }
      .form-top-buttons { top: 15px; right: 15px; gap: 8px; }
      .form-top-buttons button { padding: 5px 10px; font-size: 0.8rem; }
      .form-title { font-size: 1.6rem; margin-top: 45px; }
      .sample-notice { margin-bottom: 20px; font-size: 0.85rem; }
      /* 今回使用しませんが、デザイン統一のため元のCSSを残します */
      .choice-group { gap: 15px 15px; }
      .choice-group label { flex-basis: calc(50% - 10px); }
    }
     @media (max-width: 480px) {
         #theme-toggle-button { top: 10px; left: 10px; }
         .form-top-buttons { top: 10px; right: 10px; }
         .form-title { margin-top: 50px; }
         /* 今回使用しませんが、デザイン統一のため元のCSSを残します */
         .choice-group label { flex-basis: 100%; }
         #toast { padding: 10px 15px 6px; }
         .toast-main { gap: 10px; }
         .toast-icon { width: 20px; height: 20px; }
         .toast-sub-message { margin-left: 30px; font-size: 0.75em;}
         .toast-progress-bar { height: 3px; }
         /* 電話番号入力フィールドの調整 */
         .tel-input-group { flex-wrap: wrap; }
         .tel-input-group input { width: calc(50% - 8px); /* 2列表示 */ }
         .tel-input-group input:first-child,
         .tel-input-group input:nth-child(3),
         .tel-input-group input:nth-child(5) { width: calc(33.3% - 8px); /* 3列表示にする場合 */ }
         .tel-input-group span { width: auto; } /* ハイフンは幅を固定しない */
     }
  </style>
</head>
<body class="">
  <div class="form-container">
    <button id="theme-toggle-button" type="button" aria-label="テーマを切り替え">
        <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.106a.75.75 0 00-1.06-1.06l-1.591 1.59a.75.75 0 101.06 1.061l1.591-1.59zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5h2.25a.75.75 0 01.75.75zM17.834 18.894a.75.75 0 001.06-1.06l-1.59-1.591a.75.75 0 10-1.061 1.06l1.59 1.591zM12 18a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0v-2.25A.75.75 0 0112 18zM5.106 17.834a.75.75 0 001.06 1.06l1.591-1.59a.75.75 0 00-1.06-1.061l-1.591 1.59zM3 12a.75.75 0 01.75-.75h2.25a.75.75 0 010 1.5H3.75A.75.75 0 013 12zM6.106 5.106a.75.75 0 00-1.06 1.06l1.59 1.591a.75.75 0 101.061-1.06l-1.59-1.591z"></path></svg>
        <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 01.162.819A8.97 8.97 0 009 6a9 9 0 009 9 8.97 8.97 0 003.463-.69.75.75 0 01.981.98 10.503 10.503 0 01-9.694 6.46c-5.799 0-10.5-4.701-10.5-10.5 0-3.51 1.713-6.625 4.469-8.474a.75.75 0 01.818.162z" clip-rule="evenodd"></path></svg>
    </button>
    <div class="form-top-buttons">
        <button id="fill-sample-button" type="button">サンプル値入力</button>
        <button id="reset-form-button" type="button">リセット</button>
    </div>
    <h2 class="form-title">テスト入力サンプルページ</h2>
    <div class="sample-notice"><p>このフォームはサンプルです。入力された内容は実際には送信されません。</p></div>
    <form id="personal-info-form" novalidate>
      <div class="form-group">
        <label for="last-name">氏名<span class="required-asterisk">*</span></label>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="last-name" name="lastName" placeholder="姓" class="form-control" required>
            <input type="text" id="first-name" name="firstName" placeholder="名" class="form-control" required>
        </div>
      </div>
      <div class="form-group">
        <label for="last-name-kana">ふりがな<span class="required-asterisk">*</span></label>
        <div style="display: flex; gap: 10px;">
            <input type="text" id="last-name-kana" name="lastNameKana" placeholder="セイ (全角カナ)" class="form-control" required pattern="[\u30A0-\u30FFー]*" title="全角カタカナで入力してください">
            <input type="text" id="first-name-kana" name="firstNameKana" placeholder="メイ (全角カナ)" class="form-control" required pattern="[\u30A0-\u30FFー]*" title="全角カタカナで入力してください">
        </div>
      </div>
      <div class="form-group">
        <label for="postal-code">郵便番号<span class="required-asterisk">*</span></label>
        <input type="tel" id="postal-code" name="postalCode" placeholder="例: 1000001 (ハイフンなし)" class="form-control" required pattern="\d{7}" maxlength="7" inputmode="numeric">
        <small>例: 100-0001 → 1000001 と入力してください</small>
      </div>
      <div class="form-group">
        <label for="address-pref">住所<span class="required-asterisk">*</span></label>
        <input type="text" id="address-pref" name="addressPref" placeholder="都道府県" class="form-control" required style="margin-bottom: 10px;">
        <input type="text" id="address-city" name="addressCity" placeholder="市区町村番地" class="form-control" required style="margin-bottom: 10px;">
        <input type="text" id="address-building" name="addressBuilding" placeholder="建物名・部屋番号 (任意)" class="form-control">
      </div>

      <div class="form-group">
        <label>電話番号 (ハイフンあり)<span class="required-asterisk">*</span></label>
        <div class="tel-input-group">
            <input type="tel" id="tel-split-1" name="telSplit1" placeholder="090" class="form-control" style="width: 80px;" maxlength="4" pattern="[0-9]*" inputmode="numeric" required>
            <span>-</span>
            <input type="tel" id="tel-split-2" name="telSplit2" placeholder="1234" class="form-control" style="width: 100px;" maxlength="4" pattern="[0-9]*" inputmode="numeric" required>
            <span>-</span>
            <input type="tel" id="tel-split-3" name="telSplit3" placeholder="5678" class="form-control" style="width: 100px;" maxlength="4" pattern="[0-9]*" inputmode="numeric" required>
        </div>
        <small>例: 090-1234-5678</small>
      </div>

      <div class="form-group">
        <label for="tel-single">電話番号 (ハイフンなし)<span class="required-asterisk">*</span></label>
        <input type="tel" id="tel-single" name="telSingle" placeholder="09012345678" class="form-control" maxlength="11" pattern="\d{10,11}" inputmode="numeric" required>
        <small>例: 09012345678 (10桁または11桁)</small>
      </div>

      <div class="form-group">
        <label for="email">メールアドレス<span class="required-asterisk">*</span></label>
        <input type="email" id="email" name="email" placeholder="例: yourname@example.com" class="form-control" required>
      </div>
      <div class="form-group">
        <label for="inquiry">お問い合わせ内容</label>
        <textarea id="inquiry" name="inquiry" rows="5" placeholder="ご自由に入力してください。" class="form-control"></textarea>
      </div>
      <div class="form-group">
        <input type="submit" value="入力内容を確認する (サンプル)" class="submit-button">
      </div>
      <div id="toast">
          <div class="toast-main">
              <span class="toast-icon"><svg viewBox="0 0 52 52"><circle class="check-circle" cx="26" cy="26" r="25" fill="none"/><path class="check-mark" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg></span>
              <span class="toast-message">入力内容を送信しました (サンプル)</span>
          </div>
          <span class="toast-sub-message"><span id="countdown-timer">5</span> 秒後にフォームがリセットされます。</span>
          <div class="toast-progress-bar"></div>
      </div>
    </form>
  </div>

  <script>
    // --- DOM Elements ---
    const personalInfoForm = document.getElementById("personal-info-form");
    const toast = document.getElementById("toast");
    const toastMessage = toast.querySelector('.toast-message');
    const countdownTimerSpan = document.getElementById('countdown-timer');
    const progressBar = toast.querySelector('.toast-progress-bar');
    const fillSampleButton = document.getElementById('fill-sample-button');
    const resetFormButton = document.getElementById('reset-form-button');
    const themeToggleButton = document.getElementById('theme-toggle-button');
    const bodyElement = document.body;

    // --- State Variables ---
    let toastTimeout;
    let countdownInterval;
    const localStorageThemeKey = 'personalInfoFormTheme'; // テーマのローカルストレージキーを専用に変更

    // --- Sample Data ---
    const sampleData = {
        lastName: '山田',
        firstName: '太郎',
        lastNameKana: 'ヤマダ',
        firstNameKana: 'タロウ',
        postalCode: '1000001',
        addressPref: '東京都',
        addressCity: '千代田区千代田1-1',
        addressBuilding: '皇居',
        telSplit1: '090',
        telSplit2: '1234',
        telSplit3: '5678',
        telSingle: '09012345678',
        email: 'sample@example.com',
        inquiry: 'こちらはサンプルのお問い合わせ内容です。\nテスト入力の練習にご利用ください。'
    };

    // --- Theme Handling ---
    function applyTheme(theme) {
      if (theme === 'dark') { bodyElement.classList.add('dark-theme'); }
      else { bodyElement.classList.remove('dark-theme'); }
    }
    function toggleTheme() {
      const currentTheme = bodyElement.classList.contains('dark-theme') ? 'dark' : 'light';
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      applyTheme(newTheme);
      localStorage.setItem(localStorageThemeKey, newTheme);
    }
    // Saved theme or default to light theme
    const savedTheme = localStorage.getItem(localStorageThemeKey);
    applyTheme(savedTheme || 'light');

    // --- Form Functions ---
    function fillSampleData() {
        resetFormVisuals(); hideToast();
        try {
            document.getElementById('last-name').value = sampleData.lastName;
            document.getElementById('first-name').value = sampleData.firstName;
            document.getElementById('last-name-kana').value = sampleData.lastNameKana;
            document.getElementById('first-name-kana').value = sampleData.firstNameKana;
            document.getElementById('postal-code').value = sampleData.postalCode;
            document.getElementById('address-pref').value = sampleData.addressPref;
            document.getElementById('address-city').value = sampleData.addressCity;
            document.getElementById('address-building').value = sampleData.addressBuilding;
            document.getElementById('tel-split-1').value = sampleData.telSplit1;
            document.getElementById('tel-split-2').value = sampleData.telSplit2;
            document.getElementById('tel-split-3').value = sampleData.telSplit3;
            document.getElementById('tel-single').value = sampleData.telSingle;
            document.getElementById('email').value = sampleData.email;
            document.getElementById('inquiry').value = sampleData.inquiry;
        } catch (error) { console.error("Error filling sample data:", error); showToast("サンプルデータの入力中にエラーが発生しました。", "error"); }
    }

    function resetForm() {
        personalInfoForm.reset(); resetFormVisuals(); hideToast();
    }

    function resetFormVisuals() {
        const fields = personalInfoForm.querySelectorAll('.form-control');
        fields.forEach(field => field.style.borderColor = '');
        if(progressBar) {
            progressBar.style.transition = 'none';
            progressBar.style.transform = 'scaleX(1)';
        }
    }

    // --- Event Listeners ---
    if (themeToggleButton) { themeToggleButton.addEventListener('click', toggleTheme); }
    if (fillSampleButton) { fillSampleButton.addEventListener('click', fillSampleData); }
    if (resetFormButton) { resetFormButton.addEventListener('click', resetForm); }

    personalInfoForm.addEventListener("submit", function(e) {
      e.preventDefault(); // フォームの実際の送信を阻止
      let isValid = true;
      const requiredFields = personalInfoForm.querySelectorAll('[required]');

      requiredFields.forEach(field => {
          field.style.borderColor = ''; // エラー表示をリセット
          if (!field.value.trim()) {
              isValid = false;
              field.style.borderColor = 'var(--error-color)';
          }
          // パターン検証
          if (field.pattern && !new RegExp(`^${field.pattern}$`).test(field.value)) {
              isValid = false;
              field.style.borderColor = 'var(--error-color)';
          }
      });

      if (!isValid) {
          showToast("必須項目を正しく入力してください。", "error");
          const firstInvalidField = personalInfoForm.querySelector('[style*="border-color"]');
          if (firstInvalidField) { setTimeout(() => firstInvalidField.focus({ preventScroll: true }), 50); }
          return;
      }

      // ここで入力されたデータをコンソールに表示するなどして、
      // データが送信されないが、入力は受け付けられたことを確認できる
      const formData = new FormData(personalInfoForm);
      const data = {};
      for (let [key, value] of formData.entries()) {
          data[key] = value;
      }
      console.log("フォームが送信されました (サンプルです、実際には送信されていません):", data);

      clearTimeout(toastTimeout); clearInterval(countdownInterval);
      showToast("入力内容を送信しました (サンプル)", "success");
    });

    // --- Countdown Function ---
    function startCountdown(seconds) {
        clearInterval(countdownInterval); // Clear previous interval
        let remainingSeconds = seconds;
        if(countdownTimerSpan) { countdownTimerSpan.textContent = Math.floor(remainingSeconds); }
        if(progressBar) {
            progressBar.style.transition = 'none';
            progressBar.style.transform = 'scaleX(1)';
            // DOM更新を強制するためにoffsetHeightを使用
            progressBar.offsetHeight;
        }
        // アニメーションをトリガー
        setTimeout(() => { if (toast.classList.contains('show')) { toast.classList.add('shrinking'); } }, 0);
        countdownInterval = setInterval(() => {
            remainingSeconds -= 1;
            if(countdownTimerSpan) { countdownTimerSpan.textContent = Math.max(0, Math.floor(remainingSeconds)); }
            if (remainingSeconds <= 0) {
                clearInterval(countdownInterval);
            }
        }, 1000);
    }

    // --- Toast Functions ---
    function showToast(message, type = "success") {
        clearTimeout(toastTimeout);
        clearInterval(countdownInterval);

        toastMessage.textContent = message;
        toast.classList.remove('error', 'shrinking'); // shrinkingクラスもリセット

        const subMessage = toast.querySelector('.toast-sub-message');
        const progressBar = toast.querySelector('.toast-progress-bar');

        if(progressBar) {
            progressBar.style.transition = 'none'; // アニメーションを一時停止
            progressBar.style.transform = 'scaleX(1)'; // 幅をリセット
            progressBar.style.display = 'none'; // 非表示にする
        }
        if(subMessage) { subMessage.style.display = 'none'; }

        if (type === "error") {
            toast.classList.add('error');
            // エラーメッセージの場合はプログレスバーとサブメッセージを非表示に
            // 自動リセットも行わない
            toastTimeout = setTimeout(hideToast, 3000); // エラーは3秒後に自動で隠す
        } else { // 成功メッセージ
            // アイコンアニメーションをリセット
            const icon = toast.querySelector('.toast-icon svg');
            if (icon) {
                // アニメーションをリセットするため、一度非表示にしてから表示する
                icon.style.display = 'none';
                // DOMの再描画を強制
                icon.offsetHeight;
                icon.style.display = '';
            }

            // メインの成功メッセージの場合のみカウントダウンとプログレスバーを表示
            if (message === "入力内容を登録しました (サンプル)") {
                if(subMessage) subMessage.style.display = 'block';
                if(progressBar) progressBar.style.display = 'block';
                startCountdown(5);
                toastTimeout = setTimeout(resetForm, 5000); // 5秒後にフォームをリセット
            } else {
                // その他の成功メッセージは即座に隠す
                toastTimeout = setTimeout(hideToast, 3000);
            }
        }
        toast.classList.add("show");
    }

    function hideToast() {
        clearTimeout(toastTimeout);
        clearInterval(countdownInterval);
        toast.classList.remove("show", "shrinking");
        // プログレスバーの状態をリセット
        if(progressBar) {
            progressBar.style.transition = 'none';
            progressBar.style.transform = 'scaleX(1)';
        }
    }

    // --- Reset Error Style on Input ---
    personalInfoForm.addEventListener('input', function(e) {
        if (e.target.style.borderColor === 'var(--error-color)') {
            e.target.style.borderColor = ''; // エラー表示をクリア
            // パターン検証も再度行う
            if (e.target.pattern && new RegExp(`^${e.target.pattern}$`).test(e.target.value)) {
                e.target.style.borderColor = '';
            }
        }
    });

  </script>
</body>
</html>